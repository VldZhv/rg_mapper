
### Описание функционала приложения


**Основные возможности приложения:**

1. **Загрузка плана-схемы помещения:**  
   Пользователь может загрузить изображение (поддреживаются форматы PNG, JPG, BMP), на котором расположен план помещения (выставочного пространства)

2. **Калибровка плана и определение системы координат:**  
   После загрузки изображения пользователь должен выполнить калибровку, выбрав две точки на изображении, между которыми известна реальная длина. На основе этого вводится соотношение пикселей к сантиметрам, после чего определяется шаг координатной сетки (значение по умолчанию — 10 см). После завершения калибровки изображение автоматически перерисовывается с наложенной координатной сеткой в новом масштабе

3. **Создание и управление залами:**  
   - **Добавление зала:** Пользователь выделяет прямоугольную область на изображении, которая будет соответствовать залу, и затем вводит уникальный номер и название зала. Для каждого зала создается собственная локальная система координат с точкой отсчета в левом нижнем углу зала
   - **Редактирование и удаление зала:** При двойном клике по залу открывается контекстное меню с опциями «Редактировать зал» и «Удалить зал». При редактировании можно изменить номер (проверяется уникальность) и название зала

4. **Размещение якорей (радиометок):**  
   - **Добавление якоря:** В любом зале пользователь может добавить якорь путем клика внутри зала. После этого вводятся уникальный номер якоря и дополнительная координата z (высота или положение по вертикали). Эти данные используются аудиогидом для определения его текущих координат внутри зала
   - **Редактирование и удаление якоря:** Двойной клик по якорю позволяет через контекстное меню изменить его номер или координату z или удалить якорь

5. **Создание зон воспроизведения аудиотреков:**  
   - **Добавление зоны:** В пределах выбранного зала пользователь выделяет прямоугольную область, которая соответствует зоне воспроизведения трека. После выделения зоны необходимо ввести уникальный номер (при этом две зоны в одном зале могут иметь одинаковые номера, если они относятся к разным типам), выбрать тип зоны — «Входная зона» или «Выходная зона», а также задать угол поворота зоны (от 0 до 90°)
   - **Редактирование и удаление зоны:** Двойной клик по зоне открывает контекстное меню с возможностями редактирования (изменения размеров и угла) или удаления. Если в одной точке перекрыты несколько зон, двойной клик выбирает ту, которая имеет меньшую площадь (то есть ту, которая находится «под» другой)

6. **Отображение списка объектов:**  
   Правая панель приложения содержит список всех созданных объектов: залов, якорей и зон. Для залов отображается номер и название, для объектов, находящихся внутри зала:  
   - Для якорей — их номер и локальные координаты (x, y, z) в метрах (значения округляются до 0.1 м)
   - Для зон — координаты левого нижнего угла, длина, высота (в метрах с округлением до 0.1 м) и угол поворота относительно левого нижнего угла

7. **Сохранение и загрузка проекта:**  
   Приложение позволяет сохранить полное состояние (изображение, параметры масштабирования и сетки, список залов с якорями и зонами) в специальный формат проекта (.proj). Затем сохранённый проект можно загрузить, и все созданные объекты будут восстановлены

8. **Экспорт конфигурационного файла:**  
   После завершения оформления плана зала можно экспортировать конфигурацию в JSON-формате, который впоследствии используется аудиогидами для определения координат и воспроизведения аудиотреков в зависимости от текущего местоположения

---

### Инструкция по использованию приложения

1. **Запуск приложения:**  
   Запустите приложение
   После запуска в нижнем поле (status bar) будет сообщение:  
   *"Загрузите изображение для начала работы."*

2. **Загрузка плана:**  
   Нажмите кнопку **«Открыть изображение»** и выберите файл с планом помещения

3. **Калибровка изображения:**  
   После загрузки изображения приложение автоматически переходит в режим калибровки 
   - В status bar появится сообщение:  
     *"Калибровка: Укажите 2 точки на изображении для определения отрезка с известной длиной"*  
   - Выберите две точки на изображении (кликните дважды — первая точка устанавливает начало отрезка, вторая — конец) и в открывшемся диалоговом окне введите реальную длину этого отрезка (в сантиметрах)
   - Затем в диалоговом окне укажите шаг координатной сетки (значение по умолчанию – 10 см)
   - После успешной калибровки изображение будет перерисовано с наложенной координатной сеткой в новом масштабе

4. **Создание залов:**  
   - Выберите инструмент **«Добавить зал»** и выделите прямоугольную область на изображении 
   - В появившихся диалогах введите уникальный номер и название зала
   - Для редактирования или удаления зала выполните двойной клик по залу и выберите нужное действие из контекстного меню

5. **Добавление якорей:**  
   - Перейдите в режим **«Добавить якорь»** и щелкните внутри нужного зала для установки якоря. Первоначально якорь должен быть размещен именно внутри любого зала. Впоследствии его можно будет при необходимости сдвинуть за пределы зала
   - Введите уникальный номер якоря и координату z (в сантиметрах) в появившихся диалоговых окнах
   - Для редактирования или удаления якоря выполните двойной клик по якорю и выберите соответствующую опцию

6. **Создание зон воспроизведения:**  
   - Выберите инструмент **«Добавить зону»** и выделите область внутри выбранного зала
   - После выделения введите номер зоны, выберите тип (Входная или Выходная) и задайте угол поворота зоны
   - Для редактирования или удаления зоны выполните двойной клик по зоне (в случае перекрытия зон, если меньшая зона находится под большей, будет открыто меню для меньшей зоны)

7. **Просмотр списка объектов:**  
   На правой панели отображается список всех созданных залов, якорей и зон
   - Для залов выводится номер, название, а также размеры в метрах
   - Для якорей — их номер и локальные координаты (x, y, z) с округлением до 0.1 м
   - Для зон каждый параметр (x, y, w, h, angle) выводится на отдельной строке

8. **Сохранение/Загрузка проекта и экспорт конфигурации:**  
   - **Сохранить проект:** Используйте кнопку **«Сохранить проект»** для сохранения текущего состояния (план, координатная сетка, залы, якоря и зоны) в формате .proj
   - **Загрузить проект:** Кнопка **«Загрузить проект»** позволяет восстановить ранее сохранённое состояние
   - **Экспорт конфигурации:** Кнопка **«Экспорт конфигурации»** генерирует финальный конфигурационный JSON-файл, который используется аудиогидом для автоматизации воспроизведения аудиотреков
